<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Menu principal Opérations sous Agriculture -->
    <menuitem id="menu_agriculture_operations" 
              name="Opérations" 
              parent="bsr_agri_base.menu_agriculture_root"
              sequence="20"/>

    <!-- Sous-menu Opérations -->
    <menuitem id="menu_culture_operation_all" 
              name="Toutes les Opérations" 
              parent="menu_agriculture_operations"
              action="action_culture_operation"
              sequence="10"/>

    <menuitem id="menu_culture_operation_today" 
              name="Opérations d'Aujourd'hui" 
              parent="menu_agriculture_operations"
              action="action_culture_operation_today"
              sequence="20"/>

    <menuitem id="menu_culture_operation_delayed" 
              name="Opérations en Retard" 
              parent="menu_agriculture_operations"
              action="action_culture_operation_delayed"
              sequence="30"/>

    <!-- Sous-menu Planification -->
    <menuitem id="menu_agriculture_planning" 
              name="Planification" 
              parent="menu_agriculture_operations"
              sequence="40"/>

    <!-- Actions contextuelles pour le planning -->
    <record id="action_culture_operation_calendar_view" model="ir.actions.act_window">
        <field name="name">Calendrier des Opérations</field>
        <field name="res_model">bsr.culture.operation</field>
        <field name="view_mode">calendar,kanban,tree,form</field>
        <field name="view_id" ref="view_culture_operation_calendar"/>
        <field name="context">{}</field>
    </record>

    <menuitem id="menu_culture_operation_calendar" 
              name="Calendrier" 
              parent="menu_agriculture_planning"
              action="action_culture_operation_calendar_view"
              sequence="10"/>

    <!-- Action pour vue par campagne -->
    <record id="action_culture_operation_by_campaign" model="ir.actions.act_window">
        <field name="name">Opérations par Campagne</field>
        <field name="res_model">bsr.culture.operation</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="context">{'search_default_group_campaign': 1}</field>
    </record>

    <menuitem id="menu_culture_operation_by_campaign" 
              name="Par Campagne" 
              parent="menu_agriculture_planning"
              action="action_culture_operation_by_campaign"
              sequence="20"/>

    <!-- Action pour vue par type -->
    <record id="action_culture_operation_by_type" model="ir.actions.act_window">
        <field name="name">Opérations par Type</field>
        <field name="res_model">bsr.culture.operation</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="context">{'search_default_group_type': 1}</field>
    </record>

    <menuitem id="menu_culture_operation_by_type" 
              name="Par Type" 
              parent="menu_agriculture_planning"
              action="action_culture_operation_by_type"
              sequence="30"/>

    <!-- Menu Configuration -->
    <menuitem id="menu_agriculture_operations_config" 
              name="Configuration Opérations" 
              parent="bsr_agri_base.menu_agriculture_config"
              sequence="30"/>

    <!-- Action pour les produits agricoles -->
    <record id="action_agriculture_products" model="ir.actions.act_window">
        <field name="name">Produits Agricoles</field>
        <field name="res_model">product.product</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="domain">[('categ_id', 'child_of', [
            ref('product_category_fertilizer'),
            ref('product_category_pesticide'),
            ref('product_category_seed'),
            ref('product_category_fuel')
        ])]</field>
        <field name="context">{'default_type': 'product'}</field>
    </record>

    <menuitem id="menu_agriculture_products" 
              name="Produits Agricoles" 
              parent="menu_agriculture_operations_config"
              action="action_agriculture_products"
              sequence="10"/>

    <!-- Action pour les équipements -->
    <record id="action_agriculture_equipment" model="ir.actions.act_window">
        <field name="name">Équipements Agricoles</field>
        <field name="res_model">maintenance.equipment</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="context">{}</field>
    </record>

    <menuitem id="menu_agriculture_equipment" 
              name="Équipements" 
              parent="menu_agriculture_operations_config"
              action="action_agriculture_equipment"
              sequence="20"/>

    <!-- Action pour les employés agricoles -->
    <record id="action_agriculture_employees" model="ir.actions.act_window">
        <field name="name">Personnel Agricole</field>
        <field name="res_model">hr.employee</field>
        <field name="view_mode">tree,kanban,form</field>
        <field name="context">{}</field>
    </record>

    <menuitem id="menu_agriculture_employees" 
              name="Personnel" 
              parent="menu_agriculture_operations_config"
              action="action_agriculture_employees"
              sequence="30"/>

</odoo>